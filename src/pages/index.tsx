import type { NextPage } from 'next'
import Head from 'next/head'
import Layout from '../components/layout'
import Link from 'next/link'
import Image from 'next/image'
import styles from '../styles/Main.module.scss'
import utility from '../styles/Utility.module.scss'
import { db } from "../../firebase/firebase_init";
import { Heading } from '@chakra-ui/react';
import { Button, ButtonGroup } from "@chakra-ui/react"
import { Skeleton, SkeletonCircle, SkeletonText } from "@chakra-ui/react"
import { Editable, EditableInput, EditablePreview } from "@chakra-ui/react"

export default function Home() {
  return (
    <Layout home>
      <Head>
        <title>YoYo's</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Heading color="red">Chakra UI</Heading>
        <Button colorScheme="blue">Button</Button>
        <Skeleton>
          <div>contents wrapped</div>
          <div>won't be visible</div>
        </Skeleton>
        <Editable defaultValue="ここにタッチ">
          <EditablePreview />
          <EditableInput />
        </Editable>
        https://fwywd.com/tech/next-chakra-ui<br />
        https://chakra-ui.com/<br />
        https://twilight-pirate-7d9.notion.site/76fdc572356f485abb8af170bced96f6?v=e4eeecb1321c47539f59871b0e7a5966<br />
        <Link
         href={`about`}>
          <a className={`${utility.button}  ${utility.m8}`}>About</a>
        </Link>
      </main>
      <footer>f</footer>
    </Layout>
  )
}



export function getStaticProps(){
  const ref = db.collection("users");
  const users_snapshot = ref.get();
  let getUser = JSON.parse('[]');
  users_snapshot.then((users) =>
    users.forEach((user) => {
      console.log(
        `id: ${user.id}, name: ${user.data().name}, age: ${user.data().age}`
      );
      let views = JSON.parse(`{"id":"${user.id}", "name": "${user.data().name}", "age": ${user.data().age}}`);
      console.log(views);
      getUser.push(views);
      console.log(getUser);
    })
  );
	return {
		props: {
      getUser
    }
	}
}